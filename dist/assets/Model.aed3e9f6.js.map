{"version":3,"file":"Model.aed3e9f6.js","sources":["../../node_modules/three/examples/jsm/loaders/DRACOLoader.js","../../node_modules/three/examples/jsm/renderers/CSS3DRenderer.js","../../src/components/PointsTag.js","../../node_modules/three/examples/jsm/loaders/FontLoader.js","../../src/components/CircleLine.js","../../src/pages/Model.vue"],"sourcesContent":["import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tFileLoader,\n\tLoader\n} from 'three';\n\nconst _taskCache = new WeakMap();\n\nclass DRACOLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.decoderPath = '';\n\t\tthis.decoderConfig = {};\n\t\tthis.decoderBinary = null;\n\t\tthis.decoderPending = null;\n\n\t\tthis.workerLimit = 4;\n\t\tthis.workerPool = [];\n\t\tthis.workerNextTaskID = 1;\n\t\tthis.workerSourceURL = '';\n\n\t\tthis.defaultAttributeIDs = {\n\t\t\tposition: 'POSITION',\n\t\t\tnormal: 'NORMAL',\n\t\t\tcolor: 'COLOR',\n\t\t\tuv: 'TEX_COORD'\n\t\t};\n\t\tthis.defaultAttributeTypes = {\n\t\t\tposition: 'Float32Array',\n\t\t\tnormal: 'Float32Array',\n\t\t\tcolor: 'Float32Array',\n\t\t\tuv: 'Float32Array'\n\t\t};\n\n\t}\n\n\tsetDecoderPath( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\tsetDecoderConfig( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t}\n\n\tsetWorkerLimit( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tconst taskConfig = {\n\t\t\t\tattributeIDs: this.defaultAttributeIDs,\n\t\t\t\tattributeTypes: this.defaultAttributeTypes,\n\t\t\t\tuseUniqueIDs: false\n\t\t\t};\n\n\t\t\tthis.decodeGeometry( buffer, taskConfig )\n\t\t\t\t.then( onLoad )\n\t\t\t\t.catch( onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\t/** @deprecated Kept for backward-compatibility with previous DRACOLoader versions. */\n\tdecodeDracoFile( buffer, callback, attributeIDs, attributeTypes ) {\n\n\t\tconst taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs\n\t\t};\n\n\t\tthis.decodeGeometry( buffer, taskConfig ).then( callback );\n\n\t}\n\n\tdecodeGeometry( buffer, taskConfig ) {\n\n\t\t// TODO: For backward-compatibility, support 'attributeTypes' objects containing\n\t\t// references (rather than names) to typed array constructors. These must be\n\t\t// serialized before sending them to the worker.\n\t\tfor ( const attribute in taskConfig.attributeTypes ) {\n\n\t\t\tconst type = taskConfig.attributeTypes[ attribute ];\n\n\t\t\tif ( type.BYTES_PER_ELEMENT !== undefined ) {\n\n\t\t\t\ttaskConfig.attributeTypes[ attribute ] = type.name;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tlet worker;\n\t\tconst taskID = this.workerNextTaskID ++;\n\t\tconst taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tconst geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\t_taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t}\n\n\t_createGeometry( geometryData ) {\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tconst attribute = geometryData.attributes[ i ];\n\t\t\tconst name = attribute.name;\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\n\t\t\tgeometry.setAttribute( name, new BufferAttribute( array, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n\t_loadLibrary( url, responseType ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t}\n\n\tpreload() {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t}\n\n\t_initDecoder() {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tconst useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tconst librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tconst jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tconst fn = DRACOWorker.toString();\n\n\t\t\t\tconst body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t}\n\n\t_getWorker( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tconst message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tconst worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t}\n\n\t_releaseTask( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t}\n\n\tdebug() {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t}\n\n\tdispose() {\n\n\t\tfor ( let i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\treturn this;\n\n\t}\n\n}\n\n/* WEB WORKER */\n\nfunction DRACOWorker() {\n\n\tlet decoderConfig;\n\tlet decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tconst buffer = message.buffer;\n\t\t\t\tconst taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tconst draco = module.draco;\n\t\t\t\t\tconst decoder = new draco.Decoder();\n\t\t\t\t\tconst decoderBuffer = new draco.DecoderBuffer();\n\t\t\t\t\tdecoderBuffer.Init( new Int8Array( buffer ), buffer.byteLength );\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst geometry = decodeGeometry( draco, decoder, decoderBuffer, taskConfig );\n\n\t\t\t\t\t\tconst buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoderBuffer );\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, decoderBuffer, taskConfig ) {\n\n\t\tconst attributeIDs = taskConfig.attributeIDs;\n\t\tconst attributeTypes = taskConfig.attributeTypes;\n\n\t\tlet dracoGeometry;\n\t\tlet decodingStatus;\n\n\t\tconst geometryType = decoder.GetEncodedGeometryType( decoderBuffer );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeBufferToMesh( decoderBuffer, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeBufferToPointCloud( decoderBuffer, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tconst geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( const attributeName in attributeIDs ) {\n\n\t\t\tconst attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tlet attribute;\n\t\t\tlet attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tconst numFaces = dracoGeometry.num_faces();\n\t\tconst numIndices = numFaces * 3;\n\t\tconst byteLength = numIndices * 4;\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tconst index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tconst numComponents = attribute.num_components();\n\t\tconst numPoints = dracoGeometry.num_points();\n\t\tconst numValues = numPoints * numComponents;\n\t\tconst byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tconst dataType = getDracoDataType( draco, attributeType );\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tconst array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n}\n\nexport { DRACOLoader };\n","import {\n\tMatrix4,\n\tObject3D,\n\tQuaternion,\n\tVector3\n} from 'three';\n\n/**\n * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\n */\n\nconst _position = new Vector3();\nconst _quaternion = new Quaternion();\nconst _scale = new Vector3();\n\nclass CSS3DObject extends Object3D {\n\n\tconstructor( element = document.createElement( 'div' ) ) {\n\n\t\tsuper();\n\n\t\tthis.element = element;\n\t\tthis.element.style.position = 'absolute';\n\t\tthis.element.style.pointerEvents = 'auto';\n\t\tthis.element.style.userSelect = 'none';\n\n\t\tthis.element.setAttribute( 'draggable', false );\n\n\t\tthis.addEventListener( 'removed', function () {\n\n\t\t\tthis.traverse( function ( object ) {\n\n\t\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\n\n\t\t\t\t\tobject.element.parentNode.removeChild( object.element );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.element = source.element.cloneNode( true );\n\n\t\treturn this;\n\n\t}\n\n}\n\nCSS3DObject.prototype.isCSS3DObject = true;\n\nclass CSS3DSprite extends CSS3DObject {\n\n\tconstructor( element ) {\n\n\t\tsuper( element );\n\n\t\tthis.rotation2D = 0;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.rotation2D = source.rotation2D;\n\n\t\treturn this;\n\n\t}\n\n}\n\nCSS3DSprite.prototype.isCSS3DSprite = true;\n\n//\n\nconst _matrix = new Matrix4();\nconst _matrix2 = new Matrix4();\n\nclass CSS3DRenderer {\n\n\tconstructor( parameters = {} ) {\n\n\t\tconst _this = this;\n\n\t\tlet _width, _height;\n\t\tlet _widthHalf, _heightHalf;\n\n\t\tconst cache = {\n\t\t\tcamera: { fov: 0, style: '' },\n\t\t\tobjects: new WeakMap()\n\t\t};\n\n\t\tconst domElement = parameters.element !== undefined ? parameters.element : document.createElement( 'div' );\n\n\t\tdomElement.style.overflow = 'hidden';\n\n\t\tthis.domElement = domElement;\n\n\t\tconst cameraElement = document.createElement( 'div' );\n\n\t\tcameraElement.style.transformStyle = 'preserve-3d';\n\t\tcameraElement.style.pointerEvents = 'none';\n\n\t\tdomElement.appendChild( cameraElement );\n\n\t\tthis.getSize = function () {\n\n\t\t\treturn {\n\t\t\t\twidth: _width,\n\t\t\t\theight: _height\n\t\t\t};\n\n\t\t};\n\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tconst fov = camera.projectionMatrix.elements[ 5 ] * _heightHalf;\n\n\t\t\tif ( cache.camera.fov !== fov ) {\n\n\t\t\t\tdomElement.style.perspective = camera.isPerspectiveCamera ? fov + 'px' : '';\n\t\t\t\tcache.camera.fov = fov;\n\n\t\t\t}\n\n\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t\tlet tx, ty;\n\n\t\t\tif ( camera.isOrthographicCamera ) {\n\n\t\t\t\ttx = - ( camera.right + camera.left ) / 2;\n\t\t\t\tty = ( camera.top + camera.bottom ) / 2;\n\n\t\t\t}\n\n\t\t\tconst cameraCSSMatrix = camera.isOrthographicCamera ?\n\t\t\t\t'scale(' + fov + ')' + 'translate(' + epsilon( tx ) + 'px,' + epsilon( ty ) + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse ) :\n\t\t\t\t'translateZ(' + fov + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse );\n\n\t\t\tconst style = cameraCSSMatrix +\n\t\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)';\n\n\t\t\tif ( cache.camera.style !== style ) {\n\n\t\t\t\tcameraElement.style.transform = style;\n\n\t\t\t\tcache.camera.style = style;\n\n\t\t\t}\n\n\t\t\trenderObject( scene, scene, camera, cameraCSSMatrix );\n\n\t\t};\n\n\t\tthis.setSize = function ( width, height ) {\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\t\t\t_widthHalf = _width / 2;\n\t\t\t_heightHalf = _height / 2;\n\n\t\t\tdomElement.style.width = width + 'px';\n\t\t\tdomElement.style.height = height + 'px';\n\n\t\t\tcameraElement.style.width = width + 'px';\n\t\t\tcameraElement.style.height = height + 'px';\n\n\t\t};\n\n\t\tfunction epsilon( value ) {\n\n\t\t\treturn Math.abs( value ) < 1e-10 ? 0 : value;\n\n\t\t}\n\n\t\tfunction getCameraCSSMatrix( matrix ) {\n\n\t\t\tconst elements = matrix.elements;\n\n\t\t\treturn 'matrix3d(' +\n\t\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 1 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 4 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 6 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 7 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 9 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 13 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 15 ] ) +\n\t\t\t')';\n\n\t\t}\n\n\t\tfunction getObjectCSSMatrix( matrix ) {\n\n\t\t\tconst elements = matrix.elements;\n\t\t\tconst matrix3d = 'matrix3d(' +\n\t\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 1 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 4 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 6 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 7 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 9 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 13 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 15 ] ) +\n\t\t\t')';\n\n\t\t\treturn 'translate(-50%,-50%)' + matrix3d;\n\n\t\t}\n\n\t\tfunction renderObject( object, scene, camera, cameraCSSMatrix ) {\n\n\t\t\tif ( object.isCSS3DObject ) {\n\n\t\t\t\tconst visible = ( object.visible === true ) && ( object.layers.test( camera.layers ) === true );\n\t\t\t\tobject.element.style.display = ( visible === true ) ? '' : 'none';\n\n\t\t\t\tif ( visible === true ) {\n\n\t\t\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\t\t\tlet style;\n\n\t\t\t\t\tif ( object.isCSS3DSprite ) {\n\n\t\t\t\t\t\t// http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\n\n\t\t\t\t\t\t_matrix.copy( camera.matrixWorldInverse );\n\t\t\t\t\t\t_matrix.transpose();\n\n\t\t\t\t\t\tif ( object.rotation2D !== 0 ) _matrix.multiply( _matrix2.makeRotationZ( object.rotation2D ) );\n\n\t\t\t\t\t\tobject.matrixWorld.decompose( _position, _quaternion, _scale );\n\t\t\t\t\t\t_matrix.setPosition( _position );\n\t\t\t\t\t\t_matrix.scale( _scale );\n\n\t\t\t\t\t\t_matrix.elements[ 3 ] = 0;\n\t\t\t\t\t\t_matrix.elements[ 7 ] = 0;\n\t\t\t\t\t\t_matrix.elements[ 11 ] = 0;\n\t\t\t\t\t\t_matrix.elements[ 15 ] = 1;\n\n\t\t\t\t\t\tstyle = getObjectCSSMatrix( _matrix );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstyle = getObjectCSSMatrix( object.matrixWorld );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst element = object.element;\n\t\t\t\t\tconst cachedObject = cache.objects.get( object );\n\n\t\t\t\t\tif ( cachedObject === undefined || cachedObject.style !== style ) {\n\n\t\t\t\t\t\telement.style.transform = style;\n\n\t\t\t\t\t\tconst objectData = { style: style };\n\t\t\t\t\t\tcache.objects.set( object, objectData );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( element.parentNode !== cameraElement ) {\n\n\t\t\t\t\t\tcameraElement.appendChild( element );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\trenderObject( object.children[ i ], scene, camera, cameraCSSMatrix );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { CSS3DObject, CSS3DSprite, CSS3DRenderer };\n","import * as THREE from 'three';\n\nexport default function CreatePointsTag(obj) {\n  const spriteMaterial = new THREE.SpriteMaterial({\n    map: new THREE.TextureLoader().load('./mark/light-point.png'),\n    transparent: true,\n  });\n  const sprite = new THREE.Sprite(spriteMaterial);\n  sprite.scale.set(30, 30, 1);\n\n  const pos = new THREE.Vector3();\n  obj.getWorldPosition(pos);\n  sprite.position.copy(pos);\n  return sprite;\n}\n","import {\n\tFileLoader,\n\tLoader,\n\tShapePath\n} from 'three';\n\nclass FontLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t}\n\n\t\t\tconst font = scope.parse( json );\n\n\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\treturn new Font( json );\n\n\t}\n\n}\n\n//\n\nclass Font {\n\n\tconstructor( data ) {\n\n\t\tthis.type = 'Font';\n\n\t\tthis.data = data;\n\n\t}\n\n\tgenerateShapes( text, size = 100 ) {\n\n\t\tconst shapes = [];\n\t\tconst paths = createPaths( text, size, this.data );\n\n\t\tfor ( let p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n}\n\nfunction createPaths( text, size, data ) {\n\n\tconst chars = Array.from( text );\n\tconst scale = size / data.resolution;\n\tconst line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\tconst paths = [];\n\n\tlet offsetX = 0, offsetY = 0;\n\n\tfor ( let i = 0; i < chars.length; i ++ ) {\n\n\t\tconst char = chars[ i ];\n\n\t\tif ( char === '\\n' ) {\n\n\t\t\toffsetX = 0;\n\t\t\toffsetY -= line_height;\n\n\t\t} else {\n\n\t\t\tconst ret = createPath( char, scale, offsetX, offsetY, data );\n\t\t\toffsetX += ret.offsetX;\n\t\t\tpaths.push( ret.path );\n\n\t\t}\n\n\t}\n\n\treturn paths;\n\n}\n\nfunction createPath( char, scale, offsetX, offsetY, data ) {\n\n\tconst glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\n\n\tif ( ! glyph ) {\n\n\t\tconsole.error( 'THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.' );\n\n\t\treturn;\n\n\t}\n\n\tconst path = new ShapePath();\n\n\tlet x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\n\n\tif ( glyph.o ) {\n\n\t\tconst outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\tfor ( let i = 0, l = outline.length; i < l; ) {\n\n\t\t\tconst action = outline[ i ++ ];\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { offsetX: glyph.ha * scale, path: path };\n\n}\n\nFont.prototype.isFont = true;\n\nexport { FontLoader, Font };\n","import * as THREE from 'three';\nimport { FontLoader } from 'three/examples/jsm/loaders/FontLoader.js';\n/*\n* 创建模型\n*/\nconst R = 250;\nconst geometry = new THREE.CylinderGeometry(R, R, 10, 128);\n\nconst material = new THREE.MeshBasicMaterial({\n  color: 0x42b983,\n});\nconst Cylinder = new THREE.Mesh(geometry, material);\nCylinder.translateY(-5);\nconst CircleLine = new THREE.Group();\nCircleLine.add(Cylinder);\nconst loader = new FontLoader();\nloader.load('./font/helvetiker_bold.typeface.json', (font) => {\n  const fontMaterial = new THREE.MeshLambertMaterial({\n    color: 0xffffff,\n    side: THREE.DoubleSide,\n  });\n  const Shapes = font.generateShapes('LEXUS UX300E', 30);\n  const fontGeometry = new THREE.ShapeGeometry(Shapes);\n  const textMesh = new THREE.Mesh(fontGeometry, fontMaterial);\n  textMesh.position.z = R;\n  textMesh.position.x = -120;\n  CircleLine.add(textMesh);\n});\n\nexport default CircleLine;\n","<template>\n  <div id=\"BYD\">\n    <!-- <div v-if=\"percentage < 100\" class=\"mask\">\n      <el-progress\n        :text-inside=\"true\"\n        :stroke-width=\"24\"\n        :percentage=\"percentage\"\n        status=\"success\"\n      />\n    </div> -->\n    <div class=\"mark\">\n      <div class=\"des\">\n        <!-- <div class=\"title\">刀片电池</div>\n        <div class=\"text\">单体电池长96mm、宽9mm、高1.35mm</div>\n        <div class=\"text\">可循环充放电3000次以上，续航600公里</div> -->\n        <div class=\"title\">前脸设计</div>\n        <div class=\"text\">前脸纺锤式的中网格栅设计</div>\n        <div class=\"text\">搭配两侧狭长犀利的大灯造型</div>\n      </div>\n    </div>\n    <div class=\"mark\">\n      <div class=\"des\">\n        <div class=\"text\">全新混动科技，FYRA四驱动力系统</div>\n      </div>\n    </div>\n    <div v-show=\"isShow\" id=\"car\"></div>\n    <div v-show=\"!isShow\" id=\"photosphere\"></div>\n    <el-button @click=\"handleSwitch\" class=\"switch\">切换</el-button>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, ref, onBeforeUnmount } from 'vue';\nimport * as THREE from 'three';\nimport { Viewer } from 'photo-sphere-viewer';\nimport 'photo-sphere-viewer/dist/photo-sphere-viewer.css';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader.js';\nimport { CSS3DObject, CSS3DRenderer } from 'three/examples/jsm/renderers/CSS3DRenderer.js';\n// import { CSS2DObject, CSS2DRenderer } from 'three/examples/jsm/renderers/CSS2DRenderer.js';\nimport CreatePointsTag from '../components/PointsTag.js';\nimport CircleLine from '../components/CircleLine.js';\n\nconst percentage = ref(100);\nconst isShow = ref(false);\n\nconst handleSwitch = () => {\n  isShow.value = !isShow.value;\n  const MARK = document.getElementsByClassName('mark');\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0; i < MARK.length; i++) {\n    MARK[i].style.visibility = isShow.value ? 'visible' : 'hidden';\n  }\n};\n\nonMounted(() => {\n  const mouse = new THREE.Vector2(-10000000, -1000000);\n  let flag = false;\n  const raycaster = new THREE.Raycaster();\n\n  let LFDoor = null;\n  let LBDoor = null;\n  /**\n  * 创建场景对象Scene\n  */\n  const scene = new THREE.Scene();\n  /**\n  * 设置 360 全景图片\n  */\n  const material = new THREE.MeshBasicMaterial({\n    map: new THREE.TextureLoader().load('https://photo-sphere-viewer-data.netlify.app/assets/sphere.jpg'),\n  });\n  const size = 1000;\n  const skyBox = new THREE.Mesh(new THREE.SphereBufferGeometry(size, size, size), material);\n  skyBox.geometry.scale(-1, 1, 1); // 里外两侧的表面翻转\n  scene.add(skyBox);\n\n  /**\n  * 开发辅助坐标\n  */\n  const axesHelper = new THREE.AxesHelper(250);\n  scene.add(axesHelper);\n\n  /**\n  * gltf 模型加载\n  */\n  const loader = new GLTFLoader();\n  const dracoLoader = new DRACOLoader();\n  dracoLoader.setDecoderPath('./draco/');\n  loader.setDRACOLoader(dracoLoader);\n\n  loader.load(\n    './gltf/2.gltf',\n    (gltf) => {\n      const model = new THREE.Group();\n      model.add(CircleLine);\n      const LFDoorGroup = new THREE.Group();\n      LFDoorGroup.name = 'LFDoorGroup';\n      const LBDoorGroup = new THREE.Group();\n      LBDoorGroup.name = 'LBDoorGroup';\n      LFDoor = gltf.scene.getObjectByName('左前门');\n      // const RFDoor = gltf.scene.getObjectByName('右车门');\n      LBDoor = gltf.scene.getObjectByName('左后门');\n      // const RBDoor = gltf.scene.getObjectByName('右后门');\n\n      const LFSprite = CreatePointsTag(LFDoor);\n      LFSprite.name = 'LFSprite';\n      LFSprite.position.x += 340;\n      LFSprite.position.y += -70;\n      LFSprite.position.z += -80;\n      LFDoorGroup.add(LFSprite);\n\n      const LBSprite = CreatePointsTag(LBDoor);\n      LBSprite.name = 'LBSprite';\n      LBSprite.position.x += 200;\n      LBSprite.position.y += -100;\n      LBSprite.position.z += -70;\n      LBDoorGroup.add(LBSprite);\n\n      // LFDoor.rotateY(-Math.sin(Math.PI / 2));\n      // RFDoor.rotateY(Math.sin(Math.PI / 2));\n      // LBDoor.rotateY(-Math.sin(Math.PI / 2));\n      // RBDoor.rotateY(Math.sin(Math.PI / 2));\n\n      let s = 0.0;\n      function waveAnimation() {\n        s += 0.01;\n        if (s < 0.5) {\n          LFSprite.scale.x = 30 * (1 + s);\n          LFSprite.scale.y = 30 * (1 + s);\n          LBSprite.scale.x = 30 * (1 + s);\n          LBSprite.scale.y = 30 * (1 + s);\n        } else if (s >= 0.5 && s < 1.0) {\n          LFSprite.scale.x = 30 * (2 - s);\n          LFSprite.scale.y = 30 * (2 - s);\n          LBSprite.scale.x = 30 * (2 - s);\n          LBSprite.scale.y = 30 * (2 - s);\n        } else {\n          s = 0.0;\n        }\n\n        requestAnimationFrame(waveAnimation);\n      }\n      waveAnimation();\n\n      const mark1 = document.getElementsByClassName('mark')[0];\n      mark1.style.visibility = 'visible';\n      const label1 = new CSS3DObject(mark1);\n      mark1.style.pointerEvents = 'none';\n      label1.position.copy(LFSprite.position);\n      label1.scale.set(0.5, 0.5, 1.0);\n      label1.position.set(0, 0, 0);\n      label1.position.x -= 220;\n      label1.position.y += 50;\n      label1.rotateY(-Math.PI / 2);\n      model.add(label1);\n\n      const mark2 = document.getElementsByClassName('mark')[1];\n      mark2.style.visibility = 'visible';\n      const label2 = new CSS3DObject(mark2);\n      mark2.style.pointerEvents = 'none';\n      label2.position.copy(LFSprite.position);\n      label2.scale.set(0.5, 0.5, 1.0);\n      label2.position.set(0, 0, 0);\n      label2.position.z -= 120;\n      label2.position.y += 50;\n      label2.rotateY(Math.PI);\n      model.add(label2);\n\n      LFDoor.add(LFDoorGroup);\n      LBDoor.add(LBDoorGroup);\n      model.add(gltf.scene);\n      scene.add(model);\n    },\n    (xhr) => {\n      percentage.value = +((xhr.loaded / xhr.total) * 100).toFixed(0);\n      console.log(xhr);\n    },\n    (err) => {\n      console.log({ err });\n    },\n  );\n\n  /**\n  * 进度条\n  */\n  // const FileLoader = new THREE.FileLoader();\n  // FileLoader.load(\n  //   './gltf/car.gltf',\n  //   (file) => {\n  //     console.log({ file });\n  //   },\n  //   (xhr) => {\n  //     percentage.value = +((xhr.loaded / xhr.total) * 100).toFixed(0);\n  //     console.log({ xhr });\n  //   },\n  //   (err) => {\n  //     console.log({ err });\n  //   },\n  // );\n\n  /**\n  * 光源设置\n  */\n  // 平行光1\n  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);\n  directionalLight.position.set(400, 200, 300);\n  scene.add(directionalLight);\n  // 平行光2\n  const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.8);\n  directionalLight2.position.set(-400, -200, -300);\n  scene.add(directionalLight2);\n  // 环境光\n  const ambient = new THREE.AmbientLight(0xffffff, 2.9);\n  scene.add(ambient);\n  // 点光源\n  const point = new THREE.PointLight(0xffffff);\n  point.position.set(400, 200, 300);\n  scene.add(point);\n  /**\n  * 相机设置\n  */\n  const width = window.innerWidth;\n  const height = window.innerHeight;\n  const k = width / height;\n  const s = 200;\n  const camera = new THREE.OrthographicCamera(-s * k, s * k, s, -s, 1, 3000);\n  camera.position.set(292, 223, 185);\n  camera.lookAt(scene.position);\n  /**\n  * 创建渲染器对象\n  */\n  const renderer = new THREE.WebGLRenderer({\n    antialias: true,\n  });\n  renderer.setSize(width, height);\n  renderer.setClearColor(0x00ffff, 1);\n  const carElement = document.getElementById('car');\n  if (carElement) carElement.appendChild(renderer.domElement);\n\n  const onDocumentClick = (event) => {\n    flag = true;\n    event.preventDefault();\n    mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\n    mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n  };\n\n  const onWindowResize = () => {\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    camera.aspect = window.innerWidth / (window.innerHeight - 50);\n    camera.updateProjectionMatrix();\n  };\n\n  document.addEventListener('click', onDocumentClick, false);\n  window.addEventListener('resize', onWindowResize, false);\n\n  const labelRenderer = new CSS3DRenderer();\n  labelRenderer.setSize(window.innerWidth, window.innerHeight);\n  labelRenderer.domElement.style.position = 'absolute';\n  labelRenderer.domElement.style.top = '0px';\n  labelRenderer.domElement.style.left = '0px';\n  labelRenderer.domElement.style.pointerEvents = 'none';\n  document.body.appendChild(labelRenderer.domElement);\n\n  // 渲染函数\n  const render = () => {\n    if (scene.children[6]) {\n      raycaster.setFromCamera(mouse, camera);\n\n      const intersects = raycaster.intersectObject(scene.children[6], true);\n      if (intersects[0] && flag) {\n        console.log('intersects', intersects[0]);\n        if (intersects[0].object.parent.name === '左前门' || intersects[0].object.name === 'LFSprite') {\n          if (LFDoor.flag) {\n            LFDoor.rotateY(Math.sin(Math.PI / 2));\n            LFDoor.flag = false;\n          } else {\n            LFDoor.rotateY(-Math.sin(Math.PI / 2));\n            LFDoor.flag = true;\n          }\n        }\n        if (intersects[0].object.parent.name === '左后门' || intersects[0].object.name === 'LBSprite') {\n          if (LBDoor.flag) {\n            LBDoor.rotateY(Math.sin(Math.PI / 2));\n            LBDoor.flag = false;\n          } else {\n            LBDoor.rotateY(-Math.sin(Math.PI / 2));\n            LBDoor.flag = true;\n          }\n        }\n        flag = false;\n      }\n    }\n    scene.rotateY(0.0005);\n    labelRenderer.render(scene, camera);\n    renderer.render(scene, camera);\n    requestAnimationFrame(render);\n  };\n\n  render();\n\n  const controls = new OrbitControls(camera, renderer.domElement);\n  controls.minZoom = 0.5;\n  controls.maxZoom = 1;\n  controls.maxPolarAngle = Math.PI / 2;\n  controls.minPolarAngle = 0;\n\n  /**\n  * 汽车内饰全景图\n  */\n  const viewer = new Viewer({\n    container: document.querySelector('#photosphere'),\n    // panorama: 'https://photo-sphere-viewer-data.netlify.app/assets/sphere.jpg',\n    panorama: './panorama/car2.jpg',\n    size: {\n      width: window.innerWidth,\n      height: window.innerHeight,\n    },\n    defaultZoomLvl: 10,\n    navbar: false,\n  });\n  viewer.once('ready', () => {\n    viewer.animate({\n      longitude: Math.PI,\n      latitude: '20deg',\n      zoom: 50,\n      speed: '2rpm',\n    });\n  });\n});\n\nonBeforeUnmount(() => {\n  const MARK = document.getElementsByClassName('mark');\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0; i < MARK.length; i++) {\n    MARK[i].style.visibility = 'hidden';\n  }\n  console.log('onBeforeUnmount');\n});\n</script>\n\n<style scoped>\n#car, #BYD {\n  /* height: calc(100vh - 50px); */\n  height: 100vh;\n}\n\n.mask{\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  background: #000;\n}\n.el-progress{\n  width: 50%;\n  margin: 300px auto;\n}\n\n.mark {\n  position: absolute;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  /* CSS3设置HTML元素背面不可见 */\n  backface-visibility: hidden;\n  background-color:rgba(0, 0, 0, 0.5);\n  visibility: hidden;\n}\n\n.des {\n  color: #fff;\n  background: rgba(0, 0, 0, 0.5);\n  padding: 0px;\n  background: linear-gradient(#00ffff, #00ffff) left top,\n    linear-gradient(#00ffff, #00ffff) left top,\n    linear-gradient(#00ffff, #00ffff) right bottom,\n    linear-gradient(#00ffff, #00ffff) right bottom;\n  background-repeat: no-repeat;\n  background-size: 2px 20px, 36px 2px;\n  background-color: rgba(255, 255, 255, 0.1);\n  color: #ffffff;\n  font-size: 18px;\n  padding: 8px 12px;\n}\n\n.title {\n  padding: 10px 4px;\n  font-size: 18px;\n}\n\n.text {\n  padding: 10px 24px;\n  font-size: 16px;\n}\n\n#photosphere {\n  width: 100%;\n  height: 100vh;\n}\n\n.switch {\n  position: absolute;\n  bottom: 20px;\n  right: 20px;\n  width: 50px;\n  height: 50px;\n  background: #fff;\n  border-radius: 50%;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n  cursor: pointer;\n}\n</style>\n"],"names":["THREE.SpriteMaterial","THREE.TextureLoader","THREE.Sprite","THREE.Vector3","THREE.CylinderGeometry","THREE.MeshBasicMaterial","THREE.Mesh","THREE.Group","THREE.MeshLambertMaterial","THREE.DoubleSide","THREE.ShapeGeometry","THREE.Vector2","THREE.Raycaster","THREE.Scene","THREE.SphereBufferGeometry","THREE.AxesHelper","THREE.DirectionalLight","THREE.AmbientLight","THREE.PointLight","THREE.OrthographicCamera","THREE.WebGLRenderer","Viewer"],"mappings":"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"}